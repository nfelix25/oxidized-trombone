{
  "accepted": true,
  "schemaName": "lesson_section_v1",
  "payload": {
    "schema_version": "lesson_section_v1",
    "role": "lesson-expand",
    "section_id": "sec-const-vs-pointer",
    "type": "concept",
    "content": "`const` can bind either the data a pointer sees or the pointer value itself, and POSIX-facing wrappers need both flavors to model shared read-only buffers. A *pointer-to-const* (`const uint8_t *p`) forbids mutating the bytes but lets the pointer move; a *const pointer* (`uint8_t * const p`) freezes the address while still allowing writes through it. When you map a diagnostics page with `PROT_READ`, you should publish a pointer-to-const so callers cannot scribble over kernel-owned bytes, yet you may still keep a const pointer to track the base of a window that must never retarget. ```c\n#include <sys/mman.h>\n#include <stddef.h>\n#include <stdint.h>\n#include <stdio.h>\n\nstruct readonly_slice {\n    const uint8_t *data;   /* pointer-to-const: data immutable */\n    size_t length;\n};\n\nstatic uint8_t * const snapshot_base = (uint8_t *)0x7f0000000000ULL;\n\nstruct readonly_slice expose_ro_window(const uint8_t *page,\n                                       size_t page_len,\n                                       size_t offset,\n                                       size_t span)\n{\n    if (offset + span > page_len) {\n        return (struct readonly_slice){NULL, 0};\n    }\n    const uint8_t *cursor = page + offset; /* cursor may move */\n    return (struct readonly_slice){cursor, span};\n}\n\nvoid log_first_byte(const struct readonly_slice *view)\n{\n    if (view->data && view->length) {\n        printf(\"0x%02x\\n\", view->data[0]);\n    }\n}\n```\nHere `page` points to immutable shared memory, so the wrapper only exposes const-qualified views, while `snapshot_base` remains a const pointer anchoring bookkeeping for the mapping address. This split lets you build layered APIs where writes are statically rejected yet pointer values stay stable enough to coordinate DMA fences and cache invalidations.",
    "is_complete": false,
    "next_focus": "Worked example: construct readv()-style scatter/gather descriptors while preserving const and restrict promises."
  }
}