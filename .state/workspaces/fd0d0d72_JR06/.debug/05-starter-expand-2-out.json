{
  "accepted": true,
  "schemaName": "starter_section_v1",
  "payload": {
    "schema_version": "starter_section_v1",
    "role": "starter-expand",
    "section_id": "structured-clone-context-h",
    "type": "code",
    "file_path": "structured_clone_context.h",
    "content": "#ifndef STRUCTURED_CLONE_CONTEXT_H\n#define STRUCTURED_CLONE_CONTEXT_H\n\n#include <stddef.h>\n\nstruct sc_transferable_desc {\n    void *handle;\n    size_t length;\n    unsigned int flags;\n};\n\nstruct sc_context {\n    void *arena_base;\n    size_t arena_size;\n    size_t arena_used;\n    unsigned int transfer_count;\n    void *transfer_entries;\n};\n\n/* Initialize the structured clone arena and traversal stacks so the learner must zero buffers, allocate traversal storage, and propagate -ENOMEM style failures. */\nint sc_context_init(struct sc_context *ctx, size_t arena_bytes);\n\n/* Track a transferable in the context registry so the learner must detect duplicates, record handle metadata, and surface -EEXIST when the same handle is registered twice. */\nint sc_context_register_transferable(struct sc_context *ctx,\n                                     const struct sc_transferable_desc *desc);\n\n/* Release the structured clone context so the learner must walk registered transferables, detach buffers, free arenas, and keep the routine idempotent. */\nint sc_context_free(struct sc_context *ctx);\n\n#endif /* STRUCTURED_CLONE_CONTEXT_H */\n",
    "is_complete": false,
    "next_focus": "structured_clone_encoder.c"
  }
}